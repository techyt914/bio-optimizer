<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BioTune - AI Bio Optimizer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0f172a; color: white; }
        .gradient-text { background: linear-gradient(to right, #38bdf8, #818cf8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">

    <div class="max-w-2xl w-full bg-slate-800 rounded-2xl shadow-2xl p-8 border border-slate-700">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold mb-2 gradient-text">BioTune âš¡</h1>
            <p class="text-slate-400">Stop losing followers. Let AI fix your bio.</p>
        </div>

        <div class="space-y-6">
            <div>
                <label class="block text-sm font-semibold mb-2 text-slate-300">Your Current Bio</label>
                <textarea id="currentBio" class="w-full h-32 bg-slate-900 border border-slate-700 rounded-xl p-4 text-white focus:ring-2 focus:ring-sky-500 outline-none transition" placeholder="e.g. Freelance designer helping startups. DM for work."></textarea>
            </div>

            <div>
                <label class="block text-sm font-semibold mb-2 text-slate-300">Choose Vibe</label>
                <div class="grid grid-cols-3 gap-3">
                    <button onclick="setVibe('Professional')" class="vibe-btn bg-slate-700 hover:bg-slate-600 py-2 rounded-lg text-sm transition border border-transparent focus:border-sky-400">Professional ðŸ‘”</button>
                    <button onclick="setVibe('Viral/Witty')" class="vibe-btn bg-slate-700 hover:bg-slate-600 py-2 rounded-lg text-sm transition border border-transparent focus:border-sky-400">Viral / Witty ðŸš€</button>
                    <button onclick="setVibe('Minimalist')" class="vibe-btn bg-slate-700 hover:bg-slate-600 py-2 rounded-lg text-sm transition border border-transparent focus:border-sky-400">Minimalist âœ¨</button>
                </div>
                <input type="hidden" id="selectedVibe" value="Professional">
            </div>

            <button onclick="optimizeBio()" id="generateBtn" class="w-full bg-sky-500 hover:bg-sky-400 text-white font-bold py-4 rounded-xl transition shadow-lg shadow-sky-500/20">
                Optimize My Bio ðŸš€
            </button>
        </div>

        <div id="resultArea" class="hidden mt-8 pt-8 border-t border-slate-700 fade-in">
            <div class="bg-slate-900/50 p-6 rounded-xl border border-slate-700 mb-6">
                <h3 class="text-sky-400 font-bold mb-2">AI Roast ðŸ”¥</h3>
                <p id="roastText" class="text-slate-300 italic">"..."</p>
            </div>

            <h3 class="font-bold mb-4 text-white">Better Options:</h3>
            <div class="space-y-3" id="optionsContainer">
                <!-- Options go here -->
            </div>
        </div>
    </div>

    <script>
        function setVibe(vibe) {
            document.getElementById('selectedVibe').value = vibe;
            document.querySelectorAll('.vibe-btn').forEach(btn => {
                if(btn.innerText.includes(vibe)) {
                    btn.classList.add('bg-sky-600', 'text-white');
                    btn.classList.remove('bg-slate-700');
                } else {
                    btn.classList.remove('bg-sky-600', 'text-white');
                    btn.classList.add('bg-slate-700');
                }
            });
        }

        async function optimizeBio() {
            const bio = document.getElementById('currentBio').value;
            const vibe = document.getElementById('selectedVibe').value;
            const btn = document.getElementById('generateBtn');
            const resultArea = document.getElementById('resultArea');

            if (!bio) return alert("Please enter a bio first!");

            btn.innerText = "Optimizing... â³";
            btn.disabled = true;

            try {
                const response = await fetch('/api/optimize', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ bio, vibe })
                });

                const data = await response.json();

                if (data.error) {
                    throw new Error(data.details || data.error);
                }

                document.getElementById('roastText').innerText = data.roast;
                const container = document.getElementById('optionsContainer');
                container.innerHTML = '';
                
                data.options.forEach(opt => {
                    const div = document.createElement('div');
                    div.className = "bg-slate-900 p-4 rounded-lg border border-slate-700 hover:border-sky-500 transition cursor-pointer group relative";
                    div.innerHTML = `
                        <p class="text-white pr-8">${opt}</p>
                        <button onclick="navigator.clipboard.writeText('${opt.replace(/'/g, "\\'")}')" class="absolute right-3 top-3 text-slate-500 hover:text-sky-400">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>
                        </button>
                    `;
                    container.appendChild(div);
                });

                resultArea.classList.remove('hidden');

            } catch (error) {
                alert("Error: " + error.message);
            } finally {
                btn.innerText = "Optimize My Bio ðŸš€";
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>
